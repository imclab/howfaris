{% extends "base.html" %}
{% block title %}: {{from_place}} - {{to_place}},{% for row in rows %} {{row[1]}} km.{%endfor%}{% endblock %}
{% block content %}


<div class="bg"><img alt="full screen background image" src="../static/img/road_04.jpg" id="full-screen-background-image" />
</div>

<div class="pattern">
</div>

    <div class="container">

    	<div class="well form-results">

			<div>{% for row in rows %}
			    {% if row[6] %}

			<a href="http://www.vegvisir.is"><div class="logo"></div></a>

            <form action="/" method="post" autocomplete="off" id ="route_select">
                <input id="from_id" type="hidden" name="from_id" value="{{from_id}}">
                <input id="to_id" type="hidden" name="to_id" value="{{to_id}}">


			<!-- Brottfararstaður -->

			<input class="from input-block-level" type="text" name="from_place" placeholder="{{from_place}}" id="from" autocomplete="off" value="{{from_place}}" id="from"/>


			<!-- Ör -->
			<div class="arrow"><img src="../static/img/arrow.png"></div>


			<!-- Áfangastaður -->

            <input class="to input-block-level" type="text" name="to_place" placeholder="{{to_place}}" id ="to" autocomplete="off" value="{{to_place}}"/>


            <!-- Stysta vegalengd -->
            <div class="distance"><button type="submit" class="btn" class="btn" onclick="submitForm()"><img src="../static/img/reload.png" data-name="reload" alt="reload"></button>{{row[1]}}<span>km<span></div>

            </form>

            <!-- Vegir -->
			<div class="roads">
				<h6>Vegir</h6>
                {% if row[5] == '0' %}
				<p>Bundið slitlag alla leið! <p/>
                {% elif row[4] == '0' %}
                <p>Möl alla leið! <p/>
                {%else%}

                 <p>Bundið slitlag í <span>{{row[4]}}</span> km. og
				möl í <span>{{row[5]}}</span> km.<p>
                {% endif %}
			</div>

            <!-- Leiðarlýsing -->
			<div class="roads">
				<h6>Leiðarlýsing</h6>
                {% for vegur in vegir %}
				<p class="vegur">{{vegur[0]|replace("null", "Ónefndur vegur")}}</p>
                {% if vegur[1] == '_' %}
                <p class="vegnumer"></p>
                {%else%}
                <p class="vegnumer">({{vegur[1]}})</p>
                {%endif%}
                <p class="vegalengd"><span>{{vegur[2]}}</span> km.</p>
               


                {%endfor%}

            

            <!-- Helstu kennileiti 
			</div>
            <div class="roads">
                <h6>Helstu kennileiti</h6>
                {% if '*' in row[0] %}
                <p>{{row[0]|replace("* Ath. farið um fjallvegi (opnir hluta sumars) milli staða. Ekki fært fólksbílum. ", "")}}</p>
                <p style="margin-top:10px;">* Ath. farið um fjallvegi (opnir hluta sumars) milli staða. Ekki fært fólksbílum.</p>
                {%else%}
                <p>{{row[0]}}</p>
                {%endif%}
            </div> -->

			<!-- <div class="roads vegagerdin">
			Sjá nánar á vef <a href="{{row[7]}}" target="_blank">Vegagerðarinnar</a>.
			</div> -->

			<div class="bonvoyage">
			– Góða ferð! –
			</div>

             <!-- Social -->
            <div class="roads share">
                <div class="facebook"><a href="http://www.facebook.com/vegvisir.is" target="_blank">Facebook</a></div>
                <div class="twitter"><a href="http://twitter.com/vegvisiriceland" target="_blank">Twitter</a></div>
            </div> 

            <!-- <div class="share">
                <div class="fb-like" data-href="http://www.vegvisir.is" data-send="true" data-layout="button_count" data-width="120" data-show-faces="false" data-font="lucida grande"></div>
            </div> -->

        </div>


    </div>

<!-- <div class="info">
    <div class="social"><a href="http://www.facebook.com/vegvisir.is" target="_blank"><i class="icon-facebook-sign"></i></a></div>
    <div class="social"><a href="http://twitter.com/vegvisiriceland" target="_blank"><i class="icon-twitter"></i></a></div>
    <div class="photo-credit"><a href="http://www.marinothorlacius.com" target="_blank">Ljósmynd: Marinó Thorlacius</a></div>
</div> -->


<script src="svg-image-fallback.js"></script>
<script>
    $('.js-svgCheck').SVGImgFallback({
            "location" : "../static/img/"
    });
</script>

<script type="text/javascript">
var source = [
        {% for place in places %}{ id: {{ place[1] }}, name: '{{ place[0] }}' },{% endfor %}
        ];
     $('.from').typeahead({
        source: source,
        itemSelected: function(item, val, text){
        $('#from_id').val(val);
    }
    });
     $('.to').typeahead({
        source: source,
        itemSelected: function(item, val, text){
        $('#to_id').val(val);
    }
    });

$('input:text').focus(
    function(){
        $(this).val('');
        $(this).attr("placeholder","");
    });

$('#from').on('focus', function() {
    document.body.scrollTop = $(this).offset().top;
});

     function submitForm(){
        var safe_from = $(route_select.from).val().latinise();
        var safe_to = $(route_select.to).val().latinise();
        if (safe_from == '' && safe_to == '') {
            var rand1 = source[Math.floor(Math.random() * source.length)];
            var rand2 = source[Math.floor(Math.random() * source.length)];
            safe_from = rand1['name'].latinise();
$('input[name=from_place]').val(rand1['name']);
$('input[name=from_id]').val(rand1['id']);
    safe_to = rand2['name'].latinise();
$('input[name=to_place]').val(rand2['name']);
$('input[name=to_id]').val(rand2['id']);
    }

    if (safe_to == '') {
            var rand2 = source[Math.floor(Math.random() * source.length)];
    safe_to = rand2['name'].latinise();
$('input[name=to_place]').val(rand2['name']);
$('input[name=to_id]').val(rand2['id']);
    }
        safe_from = safe_from.replace(/\s/g, "_");
        safe_to = safe_to.replace(/\s/g, "_");
    $("#route_select").attr("action",'/'+safe_from+'/'+safe_to);
    $("#route_select").submit();
}

</script>

				{% endif %}
				{% endfor %}

				{% endblock %}



